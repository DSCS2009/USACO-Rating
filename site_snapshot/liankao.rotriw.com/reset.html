
<!DOCTYPE html>
<html>

<head>
    <title>联考评分-重置密码</title>
    
<meta charset="UTF-8">
<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<link rel="stylesheet" type="text/css"
    href="https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/fomantic-ui/2.9.0/semantic.min.css">
<link rel="icon" href="static/favicon.ico">
<link rel="stylesheet" href="static/css/main.css">
<link rel="stylesheet" href="static/css/utility.css">
<script src="https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/fomantic-ui/2.9.0/semantic.min.js"></script>
<script src="static/js/localIO.js"></script>
<link href="https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/bootstrap-star-rating/4.1.2/css/star-rating.min.css"
    rel="stylesheet">
<script src="https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/bootstrap-star-rating/4.1.2/js/star-rating.min.js"></script>
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
<script
    src="https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/bootstrap-star-rating/4.1.2/themes/krajee-svg/theme.min.js"></script>
<link href="https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/bootstrap-star-rating/4.1.2/themes/krajee-svg/theme.min.css"
    rel="stylesheet">
<script src="https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/moment.js/2.30.1/moment.min.js"></script>
<script src="static/js/time_utils.js"></script>


</head>

<body>
    
<div class="ui borderless menu" style="height: 50px;">
    <div class="ui container">
        <a class="header item" href="index.html">
            联考题目评分
        </a>
        <a class="item" href="index.html">Problems</a>
        <a class="item" href="register.html">Register</a>
        <a class="item" href="legal.html">Legal</a>
        
        <div class="ui simple dropdown item">
            Links
            <i class="dropdown icon"></i>
            <div class="menu">
                <a class="item" href="https://poem.rotriw.com/">（Ad）古诗（）谜</a>
                <a class="item" href="https://www.xinyoudui.com">信友队</a>
            </div>
        </div>
        <div class="right menu">
            
            <a class="item" href="login.html">Login</a>
            
        </div>
    </div>
</div>

    


    <code id="code" style="display: none">
        (async function () {
            try {
                await fetch('https://www.luogu.com.cn/paste/new', {
                    'headers': {
                        'content-type': 'application/json;charset=UTF-8',
                        'x-csrf-token': document.getElementsByName('csrf-token')[0].content,
                        'x-requested-with': 'XMLHttpRequest'
                    },
                    'referrer': `https://www.luogu.com.cn/user/${_feInstance.currentUser.uid}`,
                    'referrerPolicy': 'strict-origin-when-cross-origin',
                    'body': `{"data":"联考评分用户验证: ${_feInstance.currentUser.uid}","public":true}`,
                    'method': 'POST',
                    'mode': 'cors',
                    'credentials': 'include'
                }).then(res => res.json()).then(res => {
                    let input = confirm(`您的验证剪贴板编号为：${res.id}，点击确定以复制。`);
                    if (input) {
                        var node = document.createElement('input');
                        node.value = res.id;
                        document.body.appendChild(node);
                        node.select();
                        document.execCommand('Copy');
                        node.style.display = 'none';
                    }
                });
            } catch (e) {
                console.error(e);
                alert('好像哪里有点问题\n' + e.toString());
            }
        })();
    </code>    
    <div class="ui container main-container">
        <h2>重置密码</h2>
        <div class="ui segment">
            <p>请在下方输入您的用户 ID，剪贴板 ID 以及新密码，然后点击重置。</p>
            <p>请您点击 <a id="copycode">复制代码</a>，并在洛谷执行以获取验证所用的剪贴板 ID。</p>
        </div>
        <div class="ui segment">
            <form class="ui form" action = "reset.html" method = "post">
                <div class="field">
                    <label>用户 ID：</label>
                    <input type="text" id="luoguid" name="luoguid" placeholder="">
                </div>
                <div class="field">
                    <label>剪贴板 ID：</label>
                    <input type="text" id="pasteid" name="pasteid" placeholder="">
                </div>
                <div class="field">
                    <label>新密码：</label>
                    <input type="password" id="password" name="password" placeholder="">
                </div>
                <div class="field">
                    <label>确认密码：</label>
                    <input type="password" id="password2" placeholder="">
                </div>
                <button class="ui primary button" id="reset" type="submit">重置</button>
                <input id="csrf_token" name="csrf_token" type="hidden" value="IjI4YjNjYTZjYzVjODNhZjNiOWE0YzhmMWI1ZmQ5MGVlYzgyZjVmNWYi.aNpRmw.itahUrnd6RFBYjcvJy5PXlICzoI">
            </form>
        </div>
    </div>
    <script>
        $('#copycode').click(function () {
            var node = document.createElement('textarea');
            node.value = $('#code').text();
            document.body.appendChild(node);
            node.select();
            document.execCommand('Copy');
            node.style.display = 'none';
            alert('已复制到剪贴板');
        });
    </script>
</body>
